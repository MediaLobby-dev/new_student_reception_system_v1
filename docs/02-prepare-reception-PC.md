# æœ¬ç•ªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã†
4æœˆã«å—ä»˜ã‚’è¡Œã†PCã§æœ¬ã‚·ã‚¹ãƒ†ãƒ ã‚’å±•é–‹ã™ã‚‹æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚  
æœ¬ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ãŸæ“ä½œãŒå¤šããªã‚Šã¾ã™ã®ã§ã€CSã®å­¦ç”ŸãŒè¡Œã†ã®ãŒæœ›ã¾ã—ã„ã§ã™ã€‚

- [æœ¬ç•ªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã†](#æœ¬ç•ªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã†)
  - [å‰ææ¡ä»¶](#å‰ææ¡ä»¶)
- [æ‰‹é †](#æ‰‹é †)
  - [1. æ–°å…¥ç”Ÿã®ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚·ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹](#1-æ–°å…¥ç”Ÿã®ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚·ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹)
  - [2. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç’°å¢ƒã‚’æ•´ãˆã‚‹](#2-ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç’°å¢ƒã‚’æ•´ãˆã‚‹)
    - [1. Node.js, pnpm, TypeScript, claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#1-nodejs-pnpm-typescript-claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
      - [Voltaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#voltaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
      - [Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#nodejsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
      - [pnpmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#pnpmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
      - [TypeScriptã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#typescriptã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
      - [claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
    - [2. claspã®ãƒ­ã‚°ã‚¤ãƒ³](#2-claspã®ãƒ­ã‚°ã‚¤ãƒ³)
      - [APIã®æœ‰åŠ¹åŒ–](#apiã®æœ‰åŠ¹åŒ–)
      - [claspã®ãƒ­ã‚°ã‚¤ãƒ³](#claspã®ãƒ­ã‚°ã‚¤ãƒ³)
    - [3. ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹](#3-ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹)
    - [4. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹](#4-ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹)
    - [5. `.clasp.json` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹](#5-claspjson-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹)
      - [ã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã®å–å¾—](#ã‚¹ã‚¯ãƒªãƒ—ãƒˆidã®å–å¾—)
      - [rootDirã®å–å¾—](#rootdirã®å–å¾—)
    - [6. åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤IDã‚’å–å¾—ã™ã‚‹](#6-åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤idã‚’å–å¾—ã™ã‚‹)
    - [7. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹](#7-env-ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹)
    - [8. ãƒ“ãƒ«ãƒ‰ã™ã‚‹](#8-ãƒ“ãƒ«ãƒ‰ã™ã‚‹)
    - [9. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹](#9-ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹)
    - [10. å‹•ä½œç¢ºèª](#10-å‹•ä½œç¢ºèª)

## å‰ææ¡ä»¶
- ã‚·ã‚§ãƒ«ãŒå‹•ã‹ã›ã‚‹ç’°å¢ƒã§ã‚ã‚‹ã“ã¨ (bash, zsh, fishãªã©)
  - Mac, Linuxã®å ´åˆ
    - ç‰¹ã«å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãŒä½¿ãˆã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
  - Windowsã®å ´åˆ
    - **WSL2**ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
    - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[ã“ã¡ã‚‰](https://docs.microsoft.com/ja-jp/windows/wsl/install)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
    - CSã®å­¦ç”Ÿã§ã‚ã‚Œã°ã€1å¹´ç”Ÿã®æƒ…å ±ãƒªãƒ†ãƒ©ã‚·ãƒ¼ã®è¬›ç¾©ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ã¯ãš(2022å¹´ç¾åœ¨)ã§ã™ã€‚
- Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒã£ã¦ã„ã‚‹ã“ã¨
  - Google Spread Sheetã‚’ä½œæˆã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚
  - åˆå›ä½œæˆã—ãŸéš›ã¯ã€å–œå¤šã•ã‚“ãŒPCã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ä½œæˆã—ã¦ã„ã¾ã—ãŸã€‚
  - ä½œæ¥­ã‚’è¡Œã†å‰ã«PCã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼ã®æ–¹ã«ç¢ºèªã—ã¦ãã ã•ã„ã€‚

# æ‰‹é †
ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ã€æœ¬ç•ªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

## 1. æ–°å…¥ç”Ÿã®ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚·ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹
ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ãã€ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ãªã‚·ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚  
â€»ãƒ‡ãƒ¼ã‚¿ã‚‚ã“ã®éš›è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

> [!WARNING]
> ã‚·ãƒ¼ãƒˆåã¯`æ–°å…¥ç”ŸDB`ã¨ã—ã¦ãã ã•ã„ã€‚  
> ã¾ãŸã€ã‚·ãƒ¼ãƒˆã®1è¡Œç›®ã«ãƒ‡ãƒ¼ã‚¿ã®åç§°ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚ (ç”»åƒé€šã‚Šã«å…¥ã‚Œã‚‹ã¨è‰¯ã„ã§ã™)

![ã‚¹ã‚¯ã‚·ãƒ§](./images/sheet_intro.png)


## 2. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç’°å¢ƒã‚’æ•´ãˆã‚‹
ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’å±•é–‹ã™ã‚‹ãŸã‚ã®ç’°å¢ƒã‚’æ•´ãˆã¾ã™ã€‚  
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ãã‚Œãã‚Œå®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚  
â€»2023å¹´ç¾åœ¨ã®æ‰‹é †ã§ã™ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã®ã§ã€æœ€æ–°ã®æ‰‹é †ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### 1. Node.js, pnpm, TypeScript, claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

#### Voltaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
curl https://get.volta.sh | bash
```

#### Node.jsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
volta install node@18.18.2
```

#### pnpmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
volta install pnpm@8.14.1
```

#### TypeScriptã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
volta install typescript
```

#### claspã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
volta install @google/clasp
```

### 2. claspã®ãƒ­ã‚°ã‚¤ãƒ³
#### APIã®æœ‰åŠ¹åŒ–
ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€Google Apps Script APIã‚’æœ‰åŠ¹åŒ–ã—ã¦ãã ã•ã„ã€‚
https://script.google.com/home/usersettings

ç”»åƒã®æ‰‹é †ã«å¾“ã£ã¦æœ‰åŠ¹åŒ–ã—ã¦ãã ã•ã„ã€‚

![APIã®æœ‰åŠ¹åŒ–æ‰‹é †1](./images/api-1.png)

![APIã®æœ‰åŠ¹åŒ–æ‰‹é †2](./images/api-2.png)

#### claspã®ãƒ­ã‚°ã‚¤ãƒ³
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚
```bash
clasp login
```
ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢(ä¾‹)ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã®ã§ã€æŒ‡ç¤ºã«å¾“ã£ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚
```bash
? Open the following link in your browser:
https://accounts.google.com/o/oauth2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fscript.projects+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.scripts+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fspreadsheets&response_type=code&client_id=xxxxx.apps.googleusercontent.com&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
```

ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€ãƒ­ã‚°ã‚¤ãƒ³ãŒå®Œäº†ã§ã™ã€‚
```bash
? Authorization successful
```

### 3. ã“ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹
```bash
git clone https://github.com/MediaLobby-dev/new_student_reception_system
```
â€»ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚
```bash
cd new_student_reception_system
```

### 4. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
```bash
pnpm install
```

### 5. `.clasp.json` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
`.clasp.json.sample` ã‹ã‚‰ `.clasp.json` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```bash
cp .clasp.json.sample .clasp.json
```

```
{
  "scriptId": "ã‚¹ã‚¯ãƒªãƒ—ãƒˆID",
  "rootDir": "coreãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¾ã§ã®çµ¶å¯¾ãƒ‘ã‚¹/core"
}
```
#### ã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã®å–å¾—
GASã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ã„ãŸéš›ã®URLã® `https://script.google.com/home/projects/<ã‚¹ã‚¯ãƒªãƒ—ãƒˆID>/edit` ã®ã€`<ã‚¹ã‚¯ãƒªãƒ—ãƒˆID>` ã®éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚

#### rootDirã®å–å¾—
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€coreãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¾ã§ã®çµ¶å¯¾ãƒ‘ã‚¹ã‚’å–å¾—ã§ãã¾ã™ï¼
```bash
pnpm run viewPath
```

```bash
> newstudentreceptionsystem@0.0.0 viewPath /ãƒ‘ã‚¹/medialobby/new_student_reception_system
> pwd | echo $(cat)'/core'

coreãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¾ã§ã®çµ¶å¯¾ãƒ‘ã‚¹/core â† ã“ã®éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘
```

### 6. åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤IDã‚’å–å¾—ã™ã‚‹
ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤IDã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚
```bash
pnpm run initPush
```

ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã®ã§ã€åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤ID(åŠè§’è‹±æ•°å­—ã®ç¾…åˆ— 74æ–‡å­—)ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚
```bash
Created version 1.
- <åŠè§’è‹±æ•°å­—ã®ç¾…åˆ— 74æ–‡å­—> @1.
```

### 7. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
`.env.sample` ã‹ã‚‰ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
```bash
cp .env.sample .env
```
å…ˆç¨‹å–å¾—ã—ãŸåˆå›ãƒ‡ãƒ—ãƒ­ã‚¤IDã‚’ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½è¨˜ã—ã¦ãã ã•ã„ã€‚
```
# ãƒ—ãƒªãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤ID
VITE_PRINT_SERVICE_DEPLOY_ID="<åŠè§’è‹±æ•°å­—ã®ç¾…åˆ— 74æ–‡å­—>"
```

### 8. ãƒ“ãƒ«ãƒ‰ã™ã‚‹
```bash
pnpm run build
```

ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¤ºãŒå‡ºã‚Œã°æˆåŠŸã§ã™ã€‚
```bash
> newstudentreceptionsystem@0.0.0 build /Users/kakeru/work/medialobby/new_student_reception_system
> tsc && vite build

vite v5.0.11 building for production...
âœ“ 158 modules transformed.
core/webpanel/index.html  987.13 kB â”‚ gzip: 439.35 kB
âœ“ built in 972ms
```

### 9. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹
```bash
pnpm run push
```
ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¤ºãŒå‡ºã‚Œã°æˆåŠŸã§ã™ã€‚
```bash
> newstudentreceptionsystem@0.0.0 push /Users/kakeru/work/medialobby/new_student_reception_system
> dotenv -- bash -c 'clasp push && clasp deploy --description $(date +'%Y.%m.%d.%I.%M.%S') --deploymentId $VITE_PRINT_SERVICE_DEPLOY_ID'

â””â”€ /<ãƒ‘ã‚¹>/new_student_reception_system/core/appsscript.json
â””â”€ /<ãƒ‘ã‚¹>/new_student_reception_system/core/main.ts
â””â”€ /<ãƒ‘ã‚¹>/new_student_reception_system/core/printPage/index.html
â””â”€ /<ãƒ‘ã‚¹>/new_student_reception_system/core/webpanel/index.html
Pushed 4 files.
Created version 2.
- <åŠè§’è‹±æ•°å­—ã®ç¾…åˆ— 74æ–‡å­—> @2.
```

ä»¥ä¸Šã§ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã‚·ã‚¹ãƒ†ãƒ ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚

### 10. å‹•ä½œç¢ºèª
ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ãã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã« `æ–°å…¥ç”Ÿå—ä»˜ã‚·ã‚¹ãƒ†ãƒ ` ãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚  
![ãƒ¡ãƒ‹ãƒ¥ãƒ¼](./images/menu.png)

<hr>
ä»¥ä¸Šã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯å®Œäº†ã§ã™ã€‚
ãŠç–²ã‚Œã•ã¾ã§ã—ãŸğŸ‰
